@model TeligatiTechWeb2.Models.Cart
@using Microsoft.AspNetCore.Identity

@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<section class="container" id="details">
    <h1>@Model.category.Name</h1>
    <div class="flex">
        <img src="@Model.category.ImgUrl" />
        <div class="component-details">
            <div class="flex">
                <h2>Component: </h2>
                <p>@Model.category.Component</p>
            </div>
            <div class="flex">
                <h2>Price: </h2>
                <p>@Model.category.Price BDT</p>
            </div>
            <div class="flex">
                <h2>Description: </h2>
                <p>@Model.category.Description</p>
            </div>
            <div class="flex">
                <h2>Quantity: </h2>
                @*<label asp-for="Count" ></label>*@
                <input onchange="total()" name="count" id="count" asp-for="Count" min="1" />
                <span asp-validation-for="Count"></span>
            </div>
            <div class="flex">
                <h2>Total Price: </h2>
                <p id="totalPrice">@Model.category.Price</p>
            </div>
            <button class="btn" onclick="addToCart(@Model.category.Id, '@Model.category.Name', @Model.category.Price), total()">+ Add to Cart</button>
            <a asp-action="Index" asp-controller="Category" class="btn"> &lt; Back to Products</a>
            @if (SignInManager.IsSignedIn(User))
            {
                <a asp-action="Cart" asp-controller="Category" id="btn-cart" class="btn btn-login"><i class="fa-solid fa-cart-shopping"></i><br />Go to Cart</a>                
            }

        </div>
    </div>
    <h2 id="cartMsg">Product Added To Cart</h2>
</section>


<script>
    function total(){
        const quantity = document.getElementById("count").value;
        document.getElementById("totalPrice").innerHTML = quantity*@Model.category.Price;
    }
</script>